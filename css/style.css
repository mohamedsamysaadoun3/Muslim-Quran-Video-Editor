/* css/style.css */
@import url('https://fonts.googleapis.com/css2?family=Amiri+Quran&family=Noto+Naskh+Arabic:wght@400;500;700&family=Tajawal:wght@400;500;700&display=swap');

:root {
  --primary-color: #00796b; /* Teal - Used for active elements, save button */
  --primary-color-darker: #004d40;
  --primary-color-lighter: #4db6ac;
  --secondary-color: #ffab40; /* Amber accent - for spinner, highlights */

  /* New Design - Primarily Dark Theme Values */
  --bg-color-dark: #0D0D0D; /* Very dark background for the app */
  --surface-color-dark: #1A1A1A; /* Slightly lighter for surfaces like top bar, control area */
  --surface-color-card: rgba(30, 30, 30, 0.85); /* Card background */
  --text-color-dark: #E0E0E0; /* Main text color */
  --text-color-secondary-dark: #9E9E9E; /* Secondary text, placeholders */
  --highlight-bg-color-dark: rgba(0, 121, 107, 0.25); /* Teal highlight */
  --separator-color-dark: #37474F; /* Separator lines */
  --input-bg-color-dark: #2C2C2C; /* Input backgrounds */
  --input-border-color-dark: #4A4A4A; /* Input borders */
  --button-primary-text-color-dark: white;

  /* Light Theme Vars (Kept for theme toggle functionality) */
  --bg-color-light: #eef2f5;
  --surface-color-light: #ffffff;
  --text-color-light: #263238;
  --text-color-secondary-light: #546e7a;
  --highlight-bg-color-light: rgba(0, 121, 107, 0.08);
  --separator-color-light: #cfd8dc;
  --input-bg-color-light: #f8fafc;
  --input-border-color-light: #b0bec5;
  --button-primary-text-color-light: white;


  /* General UI Vars */
  --font-family-quran: 'Amiri Quran', 'Noto Naskh Arabic', serif;
  --font-family-ui: 'Tajawal', sans-serif;
  --shadow-soft: 0 1px 3px rgba(0,0,0,0.12);
  --shadow-medium: 0 3px 8px rgba(0,0,0,0.18);
  --shadow-strong: 0 6px 20px rgba(0,0,0,0.25);
  --border-radius-small: 4px;
  --border-radius-medium: 8px;
  --border-radius-large: 16px; /* More rounded for cards */

  /* Default to Dark Theme values for current variables */
  --current-bg-color: var(--bg-color-dark);
  --current-surface-color: var(--surface-color-dark);
  --current-text-color: var(--text-color-dark);
  --current-text-secondary-color: var(--text-color-secondary-dark);
  --current-highlight-bg-color: var(--highlight-bg-color-dark);
  --current-separator-color: var(--separator-color-dark);
  --current-input-bg-color: var(--input-bg-color-dark);
  --current-input-border-color: var(--input-border-color-dark);
  --current-button-primary-text-color: var(--button-primary-text-color-dark);
}

/* Apply Light Theme when .light-theme is on body */
.light-theme {
  --current-bg-color: var(--bg-color-light);
  --current-surface-color: var(--surface-color-light);
  --current-text-color: var(--text-color-light);
  --current-text-secondary-color: var(--text-color-secondary-light);
  --current-highlight-bg-color: var(--highlight-bg-color-light);
  --current-separator-color: var(--separator-color-light);
  --current-input-bg-color: var(--input-bg-color-light);
  --current-input-border-color: var(--input-border-color-light);
  --current-button-primary-text-color: var(--button-primary-text-color-light);
}
/* Ensure some elements retain dark mode appearance even in light theme if design dictates */
/* Or, adjust specific styles for light theme if it's fully supported */


/* --- Global Styles & Resets --- */
* { box-sizing: border-box; margin: 0; padding: 0; }
html { font-size: 16px; scroll-behavior: smooth; }
body {
  font-family: var(--font-family-ui);
  background-color: var(--current-bg-color);
  color: var(--current-text-color);
  line-height: 1.65;
  transition: background-color 0.3s ease, color 0.3s ease;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow-x: hidden;
}
#app-container { display: flex; flex-direction: column; min-height: 100vh; min-height: -webkit-fill-available;}
.screen { width: 100%; height: 100vh; height: -webkit-fill-available; display: none; flex-direction: column; }
.screen.active-screen { display: flex; }

/* --- Typography --- */
h1, h2, h3, h4 { font-weight: 500; line-height: 1.3; color: var(--current-text-color); } /* Headings use current text color in new design */
.light-theme h1, .light-theme h2, .light-theme h3, .light-theme h4 { color: var(--primary-color); } /* In light theme, headings can be primary */


h1 { font-size: 1.6rem; margin-bottom: 1rem; } /* Adjusted initial screen title */
h2 { font-size: 1.3rem; margin-bottom: 0.75rem; }
h3 { font-size: 1.1rem; margin-bottom: 0.5rem; }
p { margin-bottom: 1rem; color: var(--current-text-secondary-color); }
a { color: var(--primary-color-lighter); text-decoration: none; } /* Lighter link for dark bg */
a:hover { text-decoration: underline; color: var(--secondary-color); }
.light-theme a { color: var(--primary-color); }
.light-theme a:hover { color: var(--primary-color-darker); }

/* --- Buttons --- */
button, input[type="button"], input[type="submit"] {
  font-family: var(--font-family-ui); cursor: pointer; border: none;
  border-radius: var(--border-radius-medium); padding: 0.6em 1.2em;
  font-size: 0.95rem;
  transition: background-color 0.2s ease, box-shadow 0.2s ease, transform 0.1s ease;
  font-weight: 500; background-color: var(--current-input-bg-color); color: var(--current-text-color);
}
button:active, input[type="button"]:active, input[type="submit"]:active { transform: scale(0.98); }
button:disabled, input:disabled { opacity: 0.5; cursor: not-allowed; background-color: var(--current-separator-color) !important; color: var(--current-text-secondary-color) !important; box-shadow: none !important; }

.button-primary-action { /* For "إنشاء فيديو جديد" and panel export button */
  background-color: var(--primary-color); color: var(--current-button-primary-text-color);
  box-shadow: var(--shadow-soft); display: inline-flex; align-items: center; gap: 0.5em;
  padding: 0.75em 1.5em; font-size: 1rem; border-radius: var(--border-radius-large);
}
.button-primary-action:hover { background-color: var(--primary-color-darker); box-shadow: var(--shadow-medium); }
.button-primary-action i { margin-right: 0.3em; }
.light-theme .button-primary-action { background-color: var(--primary-color); color: white;}
.light-theme .button-primary-action:hover { background-color: var(--primary-color-darker); }


.icon-button, .theme-button {
  background: transparent; color: var(--current-text-color); border-radius: 50%;
  padding: 0.5em; font-size: 1.1rem; line-height: 1; width: 40px; height: 40px;
  display: inline-flex; align-items: center; justify-content: center;
}
.icon-button:hover, .theme-button:hover { background-color: rgba(255,255,255,0.1); }
.light-theme .icon-button:hover, .light-theme .theme-button:hover { background-color: var(--current-highlight-bg-color); }

/* Top bar buttons in editor */
.editor-top-bar .icon-button, .editor-top-bar .theme-button { color: var(--current-text-secondary-color); }
.editor-top-bar .icon-button:hover, .editor-top-bar .theme-button:hover { color: var(--current-text-color); background-color: rgba(255,255,255,0.08); }

.action-button.editor-save-btn { /* "حفظ" button in editor top bar */
    background-color: var(--primary-color); /* Blue-ish, adjust if primary is teal */
    color: white;
    border-radius: 20px;
    padding: 6px 18px;
    font-size: 0.9rem;
    box-shadow: var(--shadow-soft);
    border:none;
}
.action-button.editor-save-btn:hover {
    background-color: var(--primary-color-darker);
    box-shadow: var(--shadow-medium);
}
.action-button.editor-save-btn i { margin-right: 0.3em; }


/* --- Forms & Inputs (Panel Inputs) --- */
label { display: block; margin-bottom: 0.4em; font-size: 0.9rem; font-weight: 500; color: var(--current-text-secondary-color); }
input[type="text"], input[type="number"], input[type="file"], select {
  width: 100%; padding: 0.6em 0.8em; border: 1px solid var(--current-input-border-color);
  border-radius: var(--border-radius-small); background-color: var(--current-input-bg-color);
  color: var(--current-text-color); font-family: var(--font-family-ui); font-size: 0.95rem;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}
input[type="text"]:focus, input[type="number"]:focus, select:focus {
  outline: none; border-color: var(--primary-color-lighter);
  box-shadow: 0 0 0 2px var(--highlight-bg-color-dark); /* Teal highlight */
}
.light-theme input[type="text"]:focus, .light-theme input[type="number"]:focus, .light-theme select:focus {
  border-color: var(--primary-color); box-shadow: 0 0 0 2px var(--highlight-bg-color-light);
}
input[type="color"] {
  min-height: 38px; padding: 0.3em; border-radius: var(--border-radius-small);
  border: 1px solid var(--current-input-border-color); cursor: pointer; width: 100%;
}
input[type="range"] { /* For font size slider, etc. */
  width: 100%; height: 8px; -webkit-appearance: none; appearance: none;
  background: var(--current-input-border-color); border-radius: 4px; outline: none; padding: 0; margin: 0.5em 0;
}
input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none; appearance: none; width: 18px; height: 18px;
  background: var(--primary-color-lighter); border-radius: 50%; cursor: pointer;
  border: 3px solid var(--current-surface-color); box-shadow: var(--shadow-soft); margin-top: -5px;
}
input[type="range"]::-moz-range-thumb {
  width: 18px; height: 18px; background: var(--primary-color-lighter); border-radius: 50%;
  cursor: pointer; border: 3px solid var(--current-surface-color); box-shadow: var(--shadow-soft);
}


/* --- Initial Screen Specific Styles (No major changes, but ensure dark theme compatibility) --- */
.app-header { /* For initial screen */
  background-color: var(--primary-color); color: white; padding: 10px 15px; display: flex;
  justify-content: space-between; align-items: center; box-shadow: var(--shadow-medium);
  height: 56px; flex-shrink: 0;
}
.app-header h1 { margin: 0; font-size: 1.2rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; flex-grow: 1; color: white; }
#initial-screen main { flex-grow: 1; padding: 20px; overflow-y: auto; }
.projects-section h2 { color: var(--primary-color-lighter); border-bottom: 2px solid var(--primary-color-lighter); padding-bottom: 8px; margin-bottom: 15px; font-size: 1.4rem; }
.light-theme .projects-section h2 { color: var(--primary-color); border-bottom-color: var(--primary-color); }
#projects-list { display: grid; grid-template-columns: repeat(auto-fill, minmax(270px, 1fr)); gap: 15px; }
.project-card {
    background-color: var(--current-surface-color); color: var(--current-text-color);
    border-radius: var(--border-radius-medium); padding: 15px; box-shadow: var(--shadow-soft);
    cursor: pointer; transition: transform 0.2s ease, box-shadow 0.2s ease;
    display: flex; flex-direction: column; border: 1px solid var(--current-separator-color);
}
.project-card:hover { transform: translateY(-3px); box-shadow: var(--shadow-medium); border-color: var(--primary-color-lighter); }
.light-theme .project-card:hover { border-color: var(--primary-color); }
/* ... other project card styles remain similar ... */
.initial-footer { padding: 15px; text-align: center; margin-top: auto; background-color: var(--current-surface-color); border-top: 1px solid var(--current-separator-color); flex-shrink: 0; }


/* --- Editor Screen Redesign --- */
#editor-screen { background-color: var(--bg-color-dark); /* Overall editor background */ }

.editor-top-bar {
  background-color: var(--surface-color-dark); /* Darker top bar */
  color: var(--text-color-dark);
  padding: 0 10px; display: flex; align-items: center; gap: 8px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2); height: 50px; flex-shrink: 0;
  border-bottom: 1px solid var(--separator-color-dark);
}
.editor-top-bar .project-title-editable {
  margin: 0 10px; font-size: 1rem; font-weight: 500; color: var(--text-color-dark);
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  padding: 5px 8px; border-radius: var(--border-radius-small);
  transition: background-color 0.2s; flex-grow: 1; text-align: left;
}
.editor-top-bar .project-title-editable:hover, .editor-top-bar .project-title-editable:focus { background-color: rgba(255,255,255,0.05); outline: none; }
.editor-top-bar .project-title-editable[contenteditable="true"] { background-color: rgba(255,255,255,0.1); cursor: text; }
.editor-top-actions { display: flex; align-items: center; gap: 8px; margin-left: auto; }

#editor-main-area-new {
  flex-grow: 1; position: relative; display: flex;
  justify-content: center; align-items: center; overflow: hidden;
  background-color: var(--bg-color-dark); /* Fallback, actual bg is blur */
  padding: 10px; /* Padding around the card area */
}

#video-preview-background-blur {
  position: absolute; top: -20px; left: -20px; right: -20px; bottom: -20px;
  background-size: cover; background-position: center;
  /* Example: background-image: url('some-default-blur-bg.jpg'); JS will update this */
  filter: blur(15px) brightness(0.6);
  z-index: 1;
  transition: background-image 0.3s ease-in-out;
}

#video-preview-card-container {
  position: relative; z-index: 2;
  width: 90%; /* More responsive width */
  max-width: 380px; /* Max width of the card */
  aspect-ratio: 9 / 16; /* Card aspect ratio like in screenshot */
  background-color: var(--surface-color-card);
  backdrop-filter: blur(8px) saturate(120%); /* Glassmorphism for card */
  border-radius: var(--border-radius-large);
  box-shadow: var(--shadow-strong);
  padding: 10px; /* Padding inside the card */
  display: flex; flex-direction: column;
  justify-content: center; align-items: center;
  overflow: hidden; /* Clip content like preview container's rounded corners */
}

#video-preview-container { /* This holds the canvas and text overlays */
  width: 100%;
  /* aspect-ratio will be set by JS based on project settings */
  /* Defaulting to something reasonable if not set by JS immediately */
  aspect-ratio: 16 / 9;
  background-color: #000; /* Background for the canvas/video area */
  border-radius: var(--border-radius-medium); /* Rounded corners for actual content */
  box-shadow: none; border: none; margin-bottom: 0;
  position: relative; /* For overlay content */
  overflow: hidden; /* Clip text overlays if they exceed this container */
  transition: aspect-ratio 0.3s ease, filter 0.3s ease;
}
#video-preview-canvas { display: block; width: 100%; height: 100%; object-fit: contain; }

#preview-overlay-content {
  position: absolute; top: 0; left: 0; right: 0; bottom: 0;
  display: flex; flex-direction: column; justify-content: center; align-items: center;
  padding: clamp(8px, 2.5vw, 15px); text-align: center;
}
#preview-surah-title-overlay {
  font-size: clamp(1em, 3vw, 1.8em); /* Adjusted for smaller card view */
  margin-bottom: 0.4em; text-shadow: 1px 1px 3px rgba(0,0,0,0.7);
  color: var(--text-color-dark); font-weight: 700;
}
#preview-ayah-text-overlay {
  font-family: var(--font-family-quran);
  font-size: clamp(1.3em, 4.5vw, 2.5em); /* Adjusted */
  line-height: 1.6; color: var(--text-color-dark);
  text-shadow: 1px 1px 4px rgba(0,0,0,0.8);
  padding: 0.15em 0.3em; max-height: 55%; overflow-y: auto;
  background-color: rgba(0,0,0,0.2); /* Subtle default bg for ayah text */
  border-radius: var(--border-radius-small); width: 95%;
  box-sizing: border-box;
  transition: font-family 0.3s ease, font-size 0.3s ease, color 0.3s ease, background-color 0.3s ease;
}
#preview-translation-text-overlay {
  font-family: var(--font-family-ui);
  font-size: clamp(0.65em, 2vw, 0.9em); /* Adjusted */
  color: var(--text-color-secondary-dark); text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
  margin-top: 0.4em; padding: 0.1em 0.2em; max-height: 22%; overflow-y: auto;
  width: 90%; box-sizing: border-box; font-weight: 500;
}

/* Mini playback controls inside card (optional, style if used) */
#card-internal-playback-controls { display: none; /* Initially hidden */ width: 100%; padding-top: 10px; text-align: center; }
/* ... Styles for .card-timeline-slider, .card-buttons, .card-control-btn ... */


#editor-controls-area {
  flex-shrink: 0; background-color: var(--surface-color-dark);
  padding: 10px 0 5px 0; box-shadow: 0 -3px 10px rgba(0,0,0,0.3);
  z-index: 100; border-top: 1px solid var(--separator-color-dark);
}

#playback-timeline-section {
  max-width: 100%; padding: 0 15px; margin-bottom: 12px;
}
#timeline-container { display: flex; align-items: center; width: 100%; gap: 10px; color: var(--text-color-secondary-dark); }
#timeline-container input[type="range"]#timeline-slider {
  flex-grow: 1; height: 6px; background: var(--input-border-color-dark);
}
#timeline-container input[type="range"]#timeline-slider::-webkit-slider-thumb {
  width: 16px; height: 16px; background: var(--primary-color-lighter);
  border: 2px solid var(--surface-color-dark); margin-top: -5px; /* Adjust for thumb height */
}
#current-time-display, #total-time-display { font-size: 0.75rem; min-width: 40px; text-align: center; font-variant-numeric: tabular-nums; }

#main-playback-controls {
  display: flex; justify-content: center; align-items: center;
  gap: 12px; margin-bottom: 12px;
}
#main-playback-controls .playback-icon-button {
  background-color: transparent; /* Cleaner look */
  color: var(--text-color-secondary-dark); border-radius: 50%;
  width: 44px; height: 44px; font-size: 1.1rem;
}
#main-playback-controls .playback-icon-button:hover { background-color: rgba(255,255,255,0.08); color: var(--text-color-dark); }
#main-playback-controls .playback-icon-button.large { width: 52px; height: 52px; font-size: 1.4rem; }
#main-playback-controls .playback-icon-button.extra-large { /* Play/Pause */
  width: 64px; height: 64px; font-size: 1.8rem;
  background-color: var(--primary-color); color: white;
}
#main-playback-controls .playback-icon-button.extra-large:hover { background-color: var(--primary-color-darker); }


#main-bottom-tab-bar {
  display: flex; justify-content: flex-start; overflow-x: auto; overflow-y: hidden;
  white-space: nowrap; padding: 8px 10px; height: auto; gap: 10px;
  /* border-top: 1px solid var(--separator-color-dark); */ /* Removed, as #editor-controls-area has top border */
  background-color: transparent; /* Inherit from controls area */
}
#main-bottom-tab-bar::-webkit-scrollbar { display: none; }
#main-bottom-tab-bar { -ms-overflow-style: none; scrollbar-width: none; }

#main-bottom-tab-bar .main-tab-button {
  flex-direction: column; align-items: center; justify-content: center;
  min-width: 65px; padding: 6px 5px;
  border-radius: var(--border-radius-medium);
  background-color: rgba(255,255,255,0.05);
  color: var(--text-color-secondary-dark);
  transition: background-color 0.2s ease, color 0.2s ease;
  flex: 0 0 auto; border: 1px solid transparent; /* For active state */
}
#main-bottom-tab-bar .main-tab-button i { font-size: 1.5em; margin-bottom: 3px; }
#main-bottom-tab-bar .main-tab-button span { font-size: 0.65rem; display: block; }
#main-bottom-tab-bar .main-tab-button.active {
  background-color: var(--primary-color);
  color: white;
  border-color: var(--primary-color-darker);
}
#main-bottom-tab-bar .main-tab-button:hover:not(.active) {
    background-color: rgba(255,255,255,0.1);
    color: var(--text-color-dark);
}


#active-control-panels-container {
  position: absolute;
  /* This needs to be calculated based on the height of #editor-controls-area */
  /* Let's assume editor-controls-area is approx 150px tall for now */
  /* (timeline ~30px + playback_controls ~70px + tab_bar ~50px) */
  bottom: 155px; /* Adjust this value based on actual height of #editor-controls-area */
  left: 0; right: 0; z-index: 150; overflow: hidden; display: flex; pointer-events: none;
}
.control-panel {
  background-color: var(--surface-color-dark); /* Darker panel surface */
  border-top: 1px solid var(--separator-color-dark);
  box-shadow: 0 -4px 12px rgba(0,0,0,0.25);
  width: 100%; max-height: 40vh; /* Adjust max height */
  overflow-y: auto; display: none; flex-direction: column;
  position: absolute; bottom: 0; left:0; right:0;
  padding-bottom: 15px; pointer-events: auto;
  transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.25s ease-out;
  transform: translateY(100%); opacity: 0;
}
.control-panel.visible { display: flex; transform: translateY(0); opacity: 1; }
.panel-header {
  padding: 8px 12px; border-bottom: 1px solid var(--separator-color-dark);
  background-color: var(--surface-color-dark); position: sticky; top: 0; z-index: 10;
  display: flex; justify-content: space-between; align-items: center;
}
.panel-header h3 { margin: 0; font-size: 1rem; font-weight: 700; }
.panel-action-button { /* Close, Confirm buttons in panel header */
    color: var(--text-color-secondary-dark); font-size: 1rem; padding: 6px; width: 30px; height: 30px;
}
.panel-action-button:hover { background-color: rgba(255,255,255,0.1); color: var(--text-color-dark); }
.panel-action-button.confirm-panel-btn { color: var(--primary-color-lighter); }
.panel-action-button.confirm-panel-btn:hover { color: var(--primary-color); }

.panel-content { padding: 12px; display: grid; grid-template-columns: 1fr; gap: 15px 18px; }
@media (min-width: 500px) { .panel-content { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); } }
.panel-content > div { display: flex; flex-direction: column; gap: 5px; }
.panel-content h4 { /* Section titles within panels */
    grid-column: 1 / -1; margin-top: 8px; margin-bottom: -8px; padding-bottom: 5px;
    border-bottom: 1px solid var(--separator-color-dark);
    font-size: 0.9rem; font-weight: 700; color: var(--primary-color-lighter);
}


/* Spinner */
.spinner-overlay { /* No change needed, already good for dark theme */
  position: fixed; inset: 0; background: rgba(0, 0, 0, 0.75); z-index: 10000;
  display: flex; align-items: center; justify-content: center; backdrop-filter: blur(4px);
}
.spinner {
  border: 5px solid rgba(255,255,255,0.2); border-top: 5px solid var(--secondary-color);
  border-radius: 50%; width: 45px; height: 45px; animation: spin 0.8s linear infinite;
}
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

/* Responsive adjustments for new design */
@media (max-width: 768px) { /* Tablet and smaller */
  #video-preview-card-container { width: 80%; max-width: 350px; padding: 8px; }
  #preview-ayah-text-overlay { font-size: clamp(1.2em, 4vw, 2.2em); }
  #preview-translation-text-overlay { font-size: clamp(0.6em, 1.8vw, 0.85em); }
  .control-panel { max-height: 45vh; }
  #main-playback-controls .playback-icon-button.extra-large { width: 60px; height: 60px; font-size: 1.7rem;}
  #main-playback-controls .playback-icon-button.large { width: 48px; height: 48px; font-size: 1.3rem;}
  #main-playback-controls .playback-icon-button { width: 40px; height: 40px; font-size: 1rem;}
}

@media (max-width: 480px) { /* Mobile phones */
  html { font-size: 15px; }
  .editor-top-bar { height: 48px; }
  .editor-top-bar .project-title-editable { font-size: 0.9rem; margin: 0 5px; }
  .action-button.editor-save-btn { padding: 5px 15px; font-size: 0.85rem; }
  #video-preview-card-container { width: 92%; max-width: 320px; border-radius:var(--border-radius-medium); padding:6px; }
  #preview-surah-title-overlay { font-size: clamp(0.9em, 2.5vw, 1.5em); }
  #preview-ayah-text-overlay { font-size: clamp(1.1em, 4vw, 2em); }
  #preview-translation-text-overlay { font-size: clamp(0.55em, 1.5vw, 0.75em); }

  #editor-controls-area { padding: 8px 0 3px 0; }
  #playback-timeline-section { margin-bottom: 10px; padding: 0 10px; }
  #current-time-display, #total-time-display { font-size: 0.7rem; }
  #main-playback-controls { gap: 8px; margin-bottom: 10px; }
  #main-playback-controls .playback-icon-button.extra-large { width: 56px; height: 56px; font-size: 1.6rem;}
  #main-playback-controls .playback-icon-button.large { width: 44px; height: 44px; font-size: 1.2rem;}
  #main-playback-controls .playback-icon-button { width: 36px; height: 36px; font-size: 0.9rem;}

  #main-bottom-tab-bar { padding: 6px 8px; gap: 8px; }
  #main-bottom-tab-bar .main-tab-button { min-width: 60px; padding: 5px; }
  #main-bottom-tab-bar .main-tab-button i { font-size: 1.4em; }
  #main-bottom-tab-bar .main-tab-button span { font-size: 0.6rem; }

  #active-control-panels-container { bottom: 140px; /* Recalculate based on smaller controls */ }
  .control-panel { max-height: 50vh; } /* Allow more panel height on mobile */
  .panel-header { padding: 6px 10px; }
  .panel-header h3 { font-size: 0.95rem; }
  .panel-content { padding: 10px; gap: 12px; }
}
